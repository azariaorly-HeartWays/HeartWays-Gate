<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#eaf2ff" />
  <title>HeartWays — דמו קליל</title>

  <style>
    :root{
      --bg-from:#eaf2ff; --bg-to:#f9fbff; --card:rgba(255,255,255,.72);
      --text:#0f2233; --accent:#2e6bff; --shadow:0 8px 20px rgba(46,107,255,.18);
      --border:rgba(255,255,255,.6);

      /* צבעים מחודדים */
      --star-grad: linear-gradient(180deg,#fff7d6,#ffd166);
      --star-press: #ffea9a;
      --circle-grad: radial-gradient(circle at 50% 45%, #ffffffcc, #eaf3ff 70%, #dcebff 100%);
      --door-grad: linear-gradient(180deg,#8ec5ff,#4aa1ff);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji";
      background: linear-gradient(180deg,var(--bg-from),var(--bg-to));
      display:flex; align-items:center; justify-content:center; padding:20px; color:var(--text);
      direction: rtl; text-align: right;
    }
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    .card{
      position: relative;
      background: var(--card);
      -webkit-backdrop-filter: blur(10px); backdrop-filter: blur(10px);
      border:1px solid var(--border);
      border-radius:20px; padding:24px; max-width:560px; width:100%; box-shadow:var(--shadow);
      overflow:hidden;
    }

    /* אותיות סאבלימינל — עדינות מאוד */
    .subliminal{
      position:absolute; inset:0; pointer-events:none; user-select:none;
      display:grid; place-items:center; opacity:.055; filter: blur(.3px);
      letter-spacing:.25rem; font-size:3.2rem; line-height:1.1;
      color:#0f2233;
    }

    h1{font-size:1.6rem;margin:0 0 10px;text-align:center}
    p{margin:0 0 18px;text-align:center;color:#35566a}

    .question{margin-bottom:16px;text-align:center}
    .options{margin-top:12px; display:grid; gap:10px}

    /* כפתור כוכב */
    .btn{
      position:relative; display:grid; place-items:center; width:100%; min-height:84px;
      border:none; cursor:pointer; background:transparent; color:#263a4a; font-weight:600;
      text-align:center; padding:12px;
    }
    .btn::before{
      content:""; position:absolute; inset:0; margin:auto; width:100%; height:84px;
      background: var(--star-grad);
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      box-shadow: 0 6px 16px rgba(0,0,0,.10);
      transition: transform .1s ease, filter .2s ease, box-shadow .2s ease;
    }
    .btn span{ position:relative; z-index:1; padding-inline:10px }
    .btn:active::before{ transform: scale(.98); filter: brightness(1.02); }
    .btn[aria-pressed="true"]::before{ box-shadow: 0 0 0 3px var(--star-press) inset, 0 8px 20px rgba(0,0,0,.12); }

    .cta{
      display:block;width:100%;padding:12px;background:linear-gradient(180deg,#e6f0ff,#d6e8ff);
      border:none;border-radius:16px;font-size:1rem;font-weight:700;color:var(--text);
      cursor:pointer;box-shadow:var(--shadow); margin-top:12px;
    }

    .meta{margin-top:10px;text-align:center;color:#4b6473;font-size:.9rem}
    .progress{height:8px;background:#e6edf7;border-radius:999px;overflow:hidden;margin-bottom:12px}
    .bar{height:100%;width:0;background:var(--accent);transition:width .3s ease}
    .footer{margin-top:14px;text-align:center;color:#6a7d88;font-size:.8rem}

    /* בועה עגולה לשאלה הראשונה */
    .intro-circle{
      width:220px; height:220px; border-radius:999px; margin:0 auto 14px;
      background: var(--circle-grad); display:grid; place-items:center; padding:18px;
      box-shadow: 0 10px 26px rgba(46,107,255,.18);
      text-align:center; font-weight:700; color:#193041;
    }

    @media (prefers-reduced-motion: reduce){
      .bar{transition:none}
      *{animation:none !important; transition:none !important;}
    }

    /* אפקט סיום — דלת נפתחת */
    .door-wrap { display:flex; flex-direction:column; gap:12px; }
    .door {
      position: relative; width: 100%; height: 280px; overflow: hidden; border-radius: 16px;
      background: var(--door-grad);
    }
    .panel { position:absolute; top:0; width:50%; height:100%; background:inherit; transition: transform 1.6s ease; }
    .panel.left  { left:0;  transform-origin:left;  }
    .panel.right { right:0; transform-origin:right; }
    body.done .panel.left  { transform: translateX(-100%); }
    body.done .panel.right { transform: translateX(100%); }

    .end-msg{
      position:absolute; z-index:2; inset:0; display:grid; place-items:center; text-align:center; color:#fff;
      text-shadow:0 2px 12px rgba(0,0,0,.22); padding:0 12px;
    }
    .chip {
      display:inline-flex; align-items:center; gap:.5rem; padding:.5rem .75rem; border-radius:999px;
      background:#ffffffcc; color:#0f2233; font-size:.9rem; width:fit-content; margin-inline:auto;
      box-shadow:0 2px 8px rgba(0,0,0,.08);
    }
  </style>
</head>

<body>
  <main class="card" role="main" aria-labelledby="title">
    <!-- אותיות שקופות כסאבלימינל -->
    <div class="subliminal" aria-hidden="true">אבגדה · וֹזרם · אחת · שתיים · שלוש</div>

    <div class="sr-only" aria-live="polite" id="live"></div>

    <h1 id="title">מה מתאים לך עכשיו?</h1>
    <p>בחירה קצרה של 3 צעדים — ונציע פתיחה מהירה שמתאימה אלייך.</p>

    <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>

    <!-- עיגול בשאלה הראשונה -->
    <div class="intro-circle" id="intro" aria-hidden="true">מה את/ה צריך/ה עכשיו?</div>

    <h1 class="question"></h1>
    <div class="options"></div>
    <button type="button" class="cta" disabled>המשך</button>

    <div class="meta">ללא הרשמה · פחות מדקה</div>
    <div class="footer">© <span id="year"></span> HeartWays</div>
  </main>

  <script>
    // 3 שאלות קצרות
    const questions = [
      { text: "מה את/ה צריך/ה עכשיו?",
        options: ["להירגע", "בוסט של אנרגיה", "להיכנס ליצירה", "להתחבר לאנשים"] },
      { text: "על מה בא לך להתמקד היום?",
        options: ["בריאות והרגשה טובה", "עבודה/כסף", "יחסים", "נתינה"] },
      { text: "כמה זמן פנוי לך כרגע?",
        options: ["דקה", "5 דקות", "10+ דקות"] }
    ];

    // מיפוי תשובה -> נתיב מעשי
    const PATHS = {
      "Calm":   { grad:"linear-gradient(180deg,#cfe9ff,#9fd0ff)", label:"רוגע ונשימה", next:"1 דקה נשימה + שחרור קטן" },
      "Boost":  { grad:"linear-gradient(180deg,#ffe08a,#ffb703)", label:"בוסט אנרגיה", next:"3 תנועות קצרות + משפט כוח" },
      "Create": { grad:"linear-gradient(180deg,#e6d7ff,#b79bff)", label:"יצירה", next:"רעיון קטן + צעד ראשון" },
      "Connect":{ grad:"linear-gradient(180deg,#ffd6e0,#ff9bb3)", label:"חיבור", next:"הודעת לב קצרה למישהו" }
    };

    function pickPath(answers){
      const first = answers[0];
      let key = "Calm";
      if (first === "להירגע") key = "Calm";
      if (first === "בוסט של אנרגיה") key = "Boost";
      if (first === "להיכנס ליצירה") key = "Create";
      if (first === "להתחבר לאנשים") key = "Connect";

      const second = answers[1];
      if (second === "עבודה/כסף" && key==="Create") key = "Boost";
      if (second === "בריאות והרגשה טובה" && key==="Boost") key = "Calm";
      return key;
    }

    let step = 0;
    const chosen = [];

    function updateYear(){
      const y = document.getElementById('year');
      if (y) y.textContent = String(new Date().getFullYear());
    }
    function updateProgress(){
      const bar = document.getElementById('bar');
      if(!bar) return;
      const pct = Math.min(100, Math.round((step / questions.length) * 100));
      bar.style.width = pct + '%';
    }

    function renderQuestion() {
      const card = document.querySelector('.card');
      const qEl  = document.querySelector('.question');
      const optEl= document.querySelector('.options');
      const ctaEl= document.querySelector('.cta');
      const intro= document.getElementById('intro');

      // סיום — פעולה מעשית
      if (step >= questions.length) {
        const pathKey = pickPath(chosen);
        const path = PATHS[pathKey] || PATHS.Calm;

        card.innerHTML = `
          <div class="door-wrap">
            <div class="door" style="--door-grad:${path.grad}">
              <div class="panel left"></div>
              <div class="panel right"></div>
              <div class="end-msg">
                <div>
                  <div style="font-size:1.2rem;margin-bottom:.25rem">התחלה טובה בשבילך:</div>
                  <div style="font-size:1.6rem;font-weight:700">${path.label}</div>
                  <p style="margin:.5rem 0 0">${path.next}</p>
                </div>
              </div>
            </div>
            <div class="chip">בחירה מהירה · מותאם אלייך</div>
            <button class="btn"><span>נסיון נוסף</span></button>
          </div>
          <div class="footer">© <span id="year"></span> HeartWays</div>
        `;
        document.body.classList.add('done');
        document.querySelector('.door-wrap .btn').onclick = ()=>location.reload();
        updateYear();
        return;
      }

      // שאלה
      qEl.textContent = questions[step].text;

      // עיגול פתיחה רק בשאלה הראשונה
      if (step === 0) {
        intro.removeAttribute('aria-hidden');
        intro.style.display = 'grid';
        intro.textContent = questions[0].text;
      } else {
        intro.style.display = 'none';
        intro.setAttribute('aria-hidden','true');
      }

      // תשובות ככוכבים
      optEl.innerHTML = "";
      questions[step].options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = "btn";
        btn.innerHTML = `<span>${opt}</span>`;
        btn.onclick = () => {
          optEl.querySelectorAll('.btn[aria-pressed]').forEach(b=>b.setAttribute('aria-pressed','false'));
          btn.setAttribute('aria-pressed','true');
          chosen[step] = opt;
          ctaEl.removeAttribute('disabled');
        };
        optEl.appendChild(btn);
      });

      ctaEl.setAttribute('disabled','');
      updateProgress();
    }

    document.addEventListener('DOMContentLoaded', () => {
      updateYear();
      const ctaEl = document.querySelector('.cta');
      ctaEl.addEventListener('click', () => { step++; renderQuestion(); });
      renderQuestion();
    });
  </script>
</body>
</html>
