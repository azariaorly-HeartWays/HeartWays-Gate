<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#eaf2ff" />
  <title>HeartWays — פתיחה 4 שלבים</title>

  <style>
    :root{
      /* בסיס קל לכיוונון עתידי */
      --bg-from:#eaf2ff; --bg-to:#f9fbff; --text:#0f2233; --accent:#2e6bff;
      --glass-bg: rgba(255,255,255,.66); --glass-border: rgba(255,255,255,.55);
      --shadow: 0 10px 30px rgba(46,107,255,.18);

      /* כוכב/דלת/בועה */
      --star-grad: linear-gradient(180deg,#fffaf0,#ffe7b8);
      --star-press:#ffe29a;
      --door-grad: linear-gradient(180deg,#8ec5ff,#4aa1ff);

      /* blobs */
      --blob1:#7cc8ff; --blob2:#ffd4e3; --blob3:#d7c6ff;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji";
      background: linear-gradient(180deg,var(--bg-from),var(--bg-to));
      display:flex; align-items:center; justify-content:center; padding:20px; color:var(--text);
      direction: rtl; text-align: right; overflow-x:hidden;
    }
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

    /* ===== blobs נוזליים ברקע ===== */
    .blobs{ position: fixed; inset:-20vmax -10vmax auto auto; width:120vmax; height:120vmax; z-index:0; pointer-events:none; filter: blur(40px); }
    .blob{ position:absolute; border-radius:40%; opacity:.35; mix-blend-mode:multiply; transform: translateZ(0); animation: floaty 16s ease-in-out infinite; }
    .blob.b1{ background:var(--blob1); width:36vmax; height:36vmax; left:10%; top:0; animation-duration:18s }
    .blob.b2{ background:var(--blob2); width:28vmax; height:28vmax; right:10%; top:20%; animation-duration:20s }
    .blob.b3{ background:var(--blob3); width:32vmax; height:32vmax; left:35%; top:35%; animation-duration:22s }
    @keyframes floaty{ 0%,100%{transform:translateY(0) rotate(0)} 50%{transform:translateY(-20px) rotate(8deg)} }

    /* ===== כרטיס Liquid-Glass ===== */
    .card-wrap{ position:relative; z-index:1 }
    .card{
      position:relative; background:var(--glass-bg);
      -webkit-backdrop-filter: blur(14px) saturate(140%); backdrop-filter: blur(14px) saturate(140%);
      border:1px solid var(--glass-border); border-radius:22px; padding:24px; max-width:860px; width:min(94vw,860px);
      box-shadow:var(--shadow); overflow:hidden;
    }
    .card::before{ content:""; position:absolute; inset:1px; border-radius:20px; border:1px solid rgba(255,255,255,.35); pointer-events:none; }
    .card::after{
      content:""; position:absolute; inset:-40% -60%; border-radius:40%;
      background: conic-gradient(from 0deg, transparent 0 70%, rgba(255,255,255,.18) 80%, transparent 88%);
      animation: sheen 14s linear infinite; mix-blend-mode: soft-light; pointer-events:none;
    }
    @keyframes sheen{ to{ transform: rotate(360deg) } }

    /* אותיות סאבלימינל */
    .subliminal{
      position:absolute; inset:0; pointer-events:none; user-select:none; display:grid; place-items:center;
      opacity:.028; filter: blur(.45px); letter-spacing:.32rem; font-size:3.2rem; line-height:1.1; color:#0f2233;
    }

    h1{font-size:1.6rem;margin:0 0 10px;text-align:center}
    p{margin:0 0 10px;text-align:center;color:#35566a}
    .footer{margin-top:12px;text-align:center;color:#6a7d88;font-size:.8rem}

    /* גריד 2×2 לבחירה מהירה */
    .stage-grid{
      display:grid; gap:14px; margin-top:12px;
      grid-template-columns: repeat(2, minmax(180px,1fr));
    }
    @media (max-width:560px){ .stage-grid{ grid-template-columns: repeat(2, minmax(140px,1fr)); } }

    /* עיגול ליקוויד-גלאס */
    .stage-btn{
      position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center;
      aspect-ratio:1/1; border-radius:999px; border:1px solid rgba(255,255,255,.55);
      background: rgba(255,255,255,.58);
      -webkit-backdrop-filter: blur(12px) saturate(140%); backdrop-filter: blur(12px) saturate(140%);
      box-shadow: 0 8px 24px rgba(0,0,0,.08); cursor:pointer; padding:14px; text-align:center;
      transition: transform .12s ease, box-shadow .2s ease;
    }
    .stage-btn .title{ font-weight:900; font-size:1.1rem; color:#183042 }
    .stage-btn .sub{ font-size:.9rem; color:#456174; margin-top:6px }
    .stage-btn:active{ transform: scale(.98) }
    .stage-btn.selected{ transform: scale(1.04); box-shadow: 0 12px 30px rgba(0,0,0,.14), 0 0 0 3px #cfe6ff inset }
    .stage-btn.selected::after{
      content:"✓"; position:absolute; top:8px; inset-inline-end:10px; font-weight:900; color:#174266;
    }

    /* כפתור פעולה */
    .cta{
      display:block;width:100%;padding:12px;background:linear-gradient(180deg,#e6f0ff,#d6e8ff);
      border:none;border-radius:16px;font-size:1rem;font-weight:900;color:var(--text);
      cursor:pointer;box-shadow:var(--shadow); margin-top:12px;
    }

    /* כוכב השראה */
    .star-card{
      position:relative; display:grid; gap:12px;
    }
    .star{
      position:relative; width:140px; height:140px; margin:0 auto;
      background: var(--star-grad);
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      box-shadow:0 10px 26px rgba(0,0,0,.14);
      animation: starIn .4s ease both;
    }
    @keyframes starIn{ from{transform:translateY(6px) scale(.96); opacity:0} to{transform:translateY(0) scale(1); opacity:1} }
    .suggest{ text-align:center; font-weight:800; font-size:1.2rem; color:#1b3344 }
    .steps{ list-style:none; padding:0; margin:0; text-align: center; line-height:1.7; color:#2b4658 }

    /* סיום — דלת נפתחת + כוכב רעיון קטן */
    .door-wrap{ display:flex; flex-direction:column; gap:12px }
    .door{
      position:relative; width:100%; height:260px; overflow:hidden; border-radius:16px; background:var(--door-grad);
      -webkit-backdrop-filter: blur(6px) saturate(140%); backdrop-filter: blur(6px) saturate(140%); border:1px solid rgba(255,255,255,.45);
    }
    .panel{ position:absolute; top:0; width:50%; height:100%; background:inherit; transition: transform 1.1s ease }
    .panel.left{ left:0; transform-origin:left } .panel.right{ right:0; transform-origin:right }
    body.done .panel.left{ transform: translateX(-100%) } body.done .panel.right{ transform: translateX(100%) }
    .end-msg{ position:absolute; z-index:2; inset:0; display:grid; place-items:center; text-align:center; color:#fff; text-shadow:0 2px 12px rgba(0,0,0,.22); padding:0 12px }
    .idea-star{
      position:absolute; width:100px; height:100px; left:10%; top:12%;
      background: var(--star-grad);
      clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
      opacity:.9; filter: drop-shadow(0 8px 18px rgba(0,0,0,.18)); animation: floaty 6s ease-in-out infinite;
    }

    @media (prefers-reduced-motion: reduce){
      *{animation:none !important; transition:none !important;}
      .blobs{ display:none; }
    }
  </style>
</head>

<body>
  <!-- רקע נוזלי -->
  <div class="blobs" aria-hidden="true">
    <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>
  </div>

  <div class="card-wrap">
    <main class="card" role="main" aria-labelledby="title">
      <div class="subliminal" aria-hidden="true">אבגדה · זרימה · לב פתוח · יחד</div>
      <div class="sr-only" aria-live="polite" id="live"></div>

      <h1 id="title">מה מתאים לך להתחיל איתו?</h1>
      <p>בחרי/בחרי שלב פתיחה — נקפיץ רעיון פרקטי שמרגיש נכון עכשיו.</p>

      <section id="stage-screen">
        <div class="stage-grid" id="grid">
          <!-- העיגולים נוצרים דינמית -->
        </div>
        <button class="cta" id="go" disabled>מתגשם</button>
      </section>

      <section id="star-screen" hidden></section>
      <section id="end-screen" hidden></section>

      <div class="footer">© <span id="year"></span> HeartWays</div>
    </main>
  </div>

  <script>
    // שלבים (Be / Play / Create / Connect) — טקסט, תיאור קצר, צבע הדגשה וצעדים פרקטיים
    const STAGES = {
      be:      { title:"להיות",   sub:"להאט רגע ולהתחבר לגוף", accent:"#3aa1ff",
                 actions:["נשימת '4–4' במשך דקה","בדיקת כתפיים/לסת – לשחרר","מילה טובה לעצמי היום"] },
      play:    { title:"לשחק",    sub:"קצת קלילות ותנועה",      accent:"#ff9800",
                 actions:["3 תנועות גוף קצרות","חיוך קטן לעצמי","משחקון 60 שניות עם מה שיש"] },
      create:  { title:"ליצור",   sub:"רעיון קטן + צעד ראשון",  accent:"#9b7dff",
                 actions:["לרשום רעיון אחד","להקדיש 2 דקות לצעד ראשון","לשלוח לחבר/ה לפידבק"] },
      connect: { title:"להתחבר",  sub:"לב אל לב, הודעה קצרה",   accent:"#ff6f9b",
                 actions:["לשלוח הודעת לב קצרה למישהו","להציע שיחת 5 דקות","לסגור זמן מפגש השבוע"] }
    };

    const state = { selected:null, reduce: matchMedia?.('(prefers-reduced-motion: reduce)').matches || false };

    function vibrate(ms=12){ if(!state.reduce && navigator.vibrate) navigator.vibrate(ms); }
    function setAccent(hex){ document.documentElement.style.setProperty('--accent', hex); }

    function renderStages(){
      const grid = document.getElementById('grid');
      grid.innerHTML = "";
      Object.entries(STAGES).forEach(([key, val])=>{
        const btn = document.createElement('button');
        btn.className = 'stage-btn';
        btn.setAttribute('data-key', key);
        btn.innerHTML = `<div class="title">${val.title}</div><div class="sub">${val.sub}</div>`;
        btn.onclick = ()=>{
          vibrate(14);
          document.querySelectorAll('.stage-btn').forEach(b=>b.classList.remove('selected'));
          btn.classList.add('selected');
          state.selected = key;
          setAccent(val.accent);
          document.getElementById('go').disabled = false;
        };
        grid.appendChild(btn);
      });
    }

    function renderStar(){
      const key = state.selected; if(!key) return;
      const st = STAGES[key];

      const starScreen = document.getElementById('star-screen');
      starScreen.hidden = false;
      document.getElementById('stage-screen').hidden = true;

      starScreen.innerHTML = `
        <div class="star-card">
          <div class="star" aria-hidden="true"></div>
          <div class="suggest">הצעה קטנה ל${st.title} — עכשיו:</div>
          <ul class="steps">${st.actions.map(a=>`<li>• ${a}</li>`).join('')}</ul>
          <div style="display:grid; gap:10px; grid-template-columns: 1fr 1fr; margin-top:6px">
            <button class="cta" id="do">מתגשם</button>
            <button class="cta" id="back" style="background:linear-gradient(180deg,#f7f9ff,#edf3ff)">בחירה אחרת</button>
          </div>
        </div>
      `;

      document.getElementById('do').onclick = ()=>{ vibrate(); renderEnd(); };
      document.getElementById('back').onclick = ()=>{
        vibrate();
        starScreen.hidden = true;
        document.getElementById('stage-screen').hidden = false;
      };
    }

    function renderEnd(){
      const key = state.selected; const st = STAGES[key];
      const end = document.getElementById('end-screen');
      end.hidden = false;
      document.getElementById('star-screen').hidden = true;

      end.innerHTML = `
        <div class="door-wrap">
          <div class="door" style="--door-grad:linear-gradient(180deg, ${st.accent}, #ffffff66)">
            <div class="panel left"></div><div class="panel right"></div>
            <div class="idea-star" aria-hidden="true"></div>
            <div class="end-msg">
              <div>
                <div style="font-size:1.2rem;margin-bottom:.25rem">יצאת/ה לדרך ב-</div>
                <div style="font-size:1.6rem;font-weight:800;margin-bottom:.35rem">${st.title}</div>
                <div>בחר/י פעולה אחת ובצע/י אותה עוד היום ✨</div>
              </div>
            </div>
          </div>
          <button class="cta" id="again">ניסיון נוסף</button>
        </div>
      `;

      document.body.classList.add('done');
      document.getElementById('again').onclick = ()=>{ vibrate(); location.reload(); };
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      // שנה בפוטר
      const y=document.getElementById('year'); if(y) y.textContent=String(new Date().getFullYear());

      renderStages();

      // כפתור "מתגשם" במסך הבחירה
      document.getElementById('go').onclick = ()=>{ if(state.selected){ vibrate(); renderStar(); } };
    });
  </script>
</body>
</html>
